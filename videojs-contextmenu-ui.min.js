/**
 * videojs-contextmenu-ui
 * @version 4.0.0
 * @copyright 2017 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsContextmenuUi=t(e.videojs)}(this,function(e){"use strict";function t(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=h.documentElement,o=h.body,i=n.clientLeft||o.clientLeft||0,u=m.pageXOffset||o.scrollLeft,s=t.left+u-i,r=n.clientTop||o.clientTop||0,c=m.pageYOffset||o.scrollTop,f=t.top+c-r;return{left:Math.round(s),top:Math.round(f)}}function n(e,n){var o={},i=t(e),u=e.offsetWidth,s=e.offsetHeight,r=i.top,c=i.left,f=n.pageY,p=n.pageX;return n.changedTouches&&(p=n.changedTouches[0].pageX,f=n.changedTouches[0].pageY),o.y=Math.max(0,Math.min(1,(r-f+s)/s)),o.x=Math.max(0,Math.min(1,(p-c)/u)),o}function o(e){return e.hasOwnProperty("contextmenuUI")&&e.contextmenuUI.hasOwnProperty("menu")&&e.contextmenuUI.menu.el()}function i(e,t){return{left:Math.round(t.width*e.x),top:Math.round(t.height-t.height*e.y)}}function u(t){var u=this;if(o(this))return void this.contextmenuUI.menu.dispose();this.contextmenu.options.cancel=!1;var s=i(n(this.el(),t),this.el().getBoundingClientRect());t.preventDefault();var r=this.contextmenuUI.menu=new C(this,{content:this.contextmenuUI.content,position:s});this.contextmenuUI.closeMenu=function(){e.warn("player.contextmenuUI.closeMenu() is deprecated, please use player.contextmenuUI.menu.dispose() instead!"),r.dispose()},r.on("dispose",function(){u.contextmenu.options.cancel=!0,e.off(h,["click","tap"],r.dispose),u.removeChild(r),delete u.contextmenuUI.menu}),this.addChild(r),e.on(h,["click","tap"],r.dispose)}function s(t){var n=this;if(!Array.isArray(t.content))throw new Error('"content" required');o(this)&&(this.contextmenuUI.menu.dispose(),this.off("vjs-contextmenu",this.contextmenuUI.onVjsContextMenu),delete this.contextmenuUI),this.contextmenu();var i=this.contextmenuUI=function(){s.apply(this,arguments)};i.onVjsContextMenu=e.bind(this,u),i.content=t.content,i.VERSION="__VERSION__",this.on("vjs-contextmenu",i.onVjsContextMenu),this.ready(function(){return n.addClass("vjs-contextmenu-ui")})}e="default"in e?e["default"]:e;var r,c="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f={},p=(Object.freeze||Object)({"default":f}),a=p&&f||p,l=void 0!==c?c:"undefined"!=typeof window?window:{};"undefined"!=typeof document?r=document:(r=l["__GLOBAL_DOCUMENT_CACHE@4"])||(r=l["__GLOBAL_DOCUMENT_CACHE@4"]=a);var d,h=r,m=d="undefined"!=typeof window?window:void 0!==c?c:"undefined"!=typeof self?self:{},y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},x=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},g=function(e){function t(){return y(this,t),v(this,e.apply(this,arguments))}return x(t,e),t.prototype.handleClick=function(t){var n=this;e.prototype.handleClick.call(this),this.options_.listener(),m.setTimeout(function(){n.player().contextmenuUI.menu.dispose()},1)},t}(e.getComponent("MenuItem")),w=e.getComponent("Menu"),_=e.dom||e,C=function(t){function n(o,i){y(this,n);var u=v(this,t.call(this,o,i));return u.dispose=e.bind(u,u.dispose),i.content.forEach(function(t){var n=function(){};"function"==typeof t.listener?n=t.listener:"string"==typeof t.href&&(n=function(){return m.open(t.href)}),u.addItem(new g(o,{label:t.label,listener:e.bind(o,n)}))}),u}return x(n,t),n.prototype.createEl=function(){var e=t.prototype.createEl.call(this);return _.addClass(e,"vjs-contextmenu-ui-menu"),e.style.left=this.options_.position.left+"px",e.style.top=this.options_.position.top+"px",e},n}(w);return(e.registerPlugin||e.plugin)("contextmenuUI",s),s.VERSION="__VERSION__",s});